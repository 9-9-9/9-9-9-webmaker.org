{% extends "events/layout.html" %}

{% block title %}Event Admin{% endblock %}

{% block body %}
{% set columns = [ 'id', 'title', 'beginDate', 'endDate', 'beginTime', 'endTime', 'address', 'organizerId', 'organizer' ] %}
<table id="event-list">
  <thead>
    <tr>
      <td id="featured-column-header"><i class="icon-star"></i></td>
      {% for c in columns %} <td>{{ c }}</td> {% endfor %}
    </tr>
  </thead>
  <tbody>
  {% for event in events %}
    <tr>
      <td>
        <form class="toggle-featured" action="{{ event.uri }}" data-remote="true" method="PATCH">
          <button type="submit" name="featured" value="1" class="{% if event.featured %}hidden{% endif %}">
            <i class="icon-star-empty"></i>
          </button>
          <button type="submit" name="featured" value="0" class="{% if not event.featured %}hidden{% endif %}">
            <i class="icon-star"></i>
          </button>
          <input name="_csrf" value="{{ csrf }}" type="hidden" />
        </form>
      </td>
      {% for c in columns %}<td>{{ event[c] }}</td>{% endfor %}
      <td class="actions-overlay">
          <a class="icon-remove-sign" href="{{ event.uri }}"
              data-method="DELETE" data-remote="true" data-confirm="Really delete?"></a>
          <a class="icon-edit-sign" href="{{ event.uri }}#edit"></a>
          <a class="icon-chevron-sign-right" href="{{ event.uri }}"></a>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block footer %}{% endblock %}
